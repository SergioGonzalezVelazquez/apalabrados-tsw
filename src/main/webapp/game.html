<!DOCTYPE html>
<html lang="es">

<head>
  <!-- Required meta tags -->
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">


  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <!--Custom CSS-->
  <link rel="stylesheet" href="stylesheets/main.css">
  <link rel="stylesheet" href="stylesheets/tablero.css">

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- JQuery -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>

  <!-- JavaScript -->
  <script type="application/javascript" src="js/shuffler.js"></script>
  <script type="text/javascript" src="js/game.js" defer="defer"></script>

  <!-- Knockout -->
  <script src="https://knockoutjs.com/downloads/knockout-3.5.0.js"></script>

  <!-- this is the code that will allow icon to be visible in the title bar of the brower -->
  <link rel="icon" type="image/ico" href="assets/images/logo.png" />
  <title>Apalabrados</title>


</head>

<body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">
      <img src="assets/images/logo.png" width="30" height="30" class="d-inline-block align-top" alt="">
      Apalabrados
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="#" data-bind="click : createGame">Crear partida</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" data-bind="click : joinGame">Unir a partida</a>
        </li>
      </ul>

      <ul class="navbar-nav ml-auto nav-flex-icons">
        <li class="nav-item" data-bind="using: player1">
          <a class="nav-link waves-effect waves-light" style="text-transform: uppercase" data-bind="text : name">
            <i class="fas fa-envelope"></i>
          </a>
        </li>
        <li class="nav-item avatar dropdown">
          <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-55" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false" data-bind="using: player1">
            <img data-bind="attr: { src: photo}" class="rounded-circle z-depth-0" width="30" height="30"
              alt="avatar image">
          </a>
          <div class="dropdown-menu dropdown-menu-lg-right dropdown-secondary"
            aria-labelledby="navbarDropdownMenuLink-55">
            <a class="dropdown-item" href="#">Perfil</a>
            <a class="dropdown-item" href="#">Preferencias</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#" data-bind="click : logout">Salir</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>

  <div class="container-fluid" data-bind="visible: isLoading">
    <div class="row  isLoading row d-flex justify-content-cente mx-0">
      <div data-bind="loading-animation: isLoading"></div>
    </div>
  </div>

  <!-- CONTENEDOR GENERAL -->
  <div class="container-fluid" data-bind="visible: shouldShowBoard">
    <div class="row mx-0">
      <!-- Col 1: Tablero  -->
      <div class="col-lg-7 col-sm-12 p-0">
        <table id="board" class="scrabble-table mdl-shadow--24dp" width="100%">
          <tbody>
            <!-- ko using : tablero -->
            <!-- ko foreach : { data: casillas, as: 'fila' } -->
            <tr>
              <!-- ko foreach : { data: fila, as: 'celda' } -->
              <!-- ko using : celda -->
              <td data-bind="class : clazz, droppable: $data">
                <label data-bind="html : label"></label>
              </td>
              <!-- /ko -->
              <!-- /ko -->
            </tr>
            <!-- /ko -->
            <!-- /ko -->
          </tbody>
        </table>
      </div>

      <!-- Col 2: Información sobre la partida -->
      <div class="col-lg-5 col-sm-12 pt-2 pr-lg-5 pl-0 ">
        <!-- Letras del juego-->

        <!-- ko using : tablero -->
        <div class="row mx-0 pb-1 letters-wrapper">
          <ul class="letters">
            <!-- ko foreach : panel -->
            <li data-bind="draggable: $data"><img data-bind="attr: { src: '/assets/images/' + $data + '.svg'}"
                alt="$data"></li>
            <!-- /ko -->
          </ul>
        </div>
        <!-- /ko -->

        <!-- Letras del juego--
        <div class="row mx-0 pb-1 letters-wrapper">
          <ul class="letters list-group">
            <li><img data-bind="attr: { src: l1Img}" alt="l1Txt"></li>
            <li><img data-bind="attr: { src: l2Img}" alt="l2Txt"></li>
            <li><img data-bind="attr: { src: l3Img}" alt="l3Txt"></li>
            <li><img data-bind="attr: { src: l4Img}" alt="l4Txt"></li>
            <li><img data-bind="attr: { src: l5Img}" alt="l5Txt"></li>
            <li><img data-bind="attr: { src: l6Img}" alt="l6Txt"></li>
            <li><img data-bind="attr: { src: l7Img}" alt="l7Txt"></li>
          </ul>
        </div>
      -->


        <!-- Panel con botones de opciones-->
        <div class="row mx-0 bg-dark mb-5 pl-0">
          <div class="btn-group btn-group-sm" role="group" aria-label="GameButtons" data-bind="using: player1">
            <button type="button" class="btn btn-dark" data-bind="enable: turn, click: $root.jugar"> <i
                class="material-icons">
                play_arrow
              </i><br><span>Jugar</span></button>

            <button type="button" id="shuffle" class="btn btn-dark"> <i class="material-icons">
                shuffle
              </i><br><span>Mezclar</span></button>

            <button type="button" class="btn btn-dark" data-bind="enable: turn, click: $root.cambiar"> <i
                class="material-icons">
                repeat
              </i><br><span>Cambiar</span></button>

            <button type="button" id="restore" class="btn btn-dark"
              data-bind="click: $root.llamar"> <i class="material-icons">
                settings_backup_restore
              </i><br><span>Llamar</span></button>

            <button type="button" class="btn btn-dark" data-bind="enable: turn, click: $root.pasar"> <i
                class="material-icons">
                fast_forward
              </i><br><span>Pasar</span></button>

            <button type="button" class="btn btn-dark" data-bind="click: $root.abandonar"> <i class="material-icons">
                outlined_flag
              </i><br><span>Rendirse</span></button>
          </div>
        </div>



        <!-- Información sobre los jugadores-->
        <div class="row mx-0 pb-3 ">

          <!-- Player 1 Info-->
          <div class="col" data-bind="using: player1">
            <div class="row player1-info mr-1">
              <div class="col-3 border border-ligh">
                <img data-bind="attr: { src: letterImg, alt: letterTxt }" width="60" height="60"
                  class="d-inline-block align-center" alt="">
              </div>
              <div class="col-4 border border-ligh">
                <div class="row-sm-12" data-bind="text : name">
                </div>
                <div class="row-sm-12 player1-turn" data-bind="visible: turn">
                  <span>Tu turno</span>
                </div>
              </div>
              <div class="col-5 border border-ligh timer" id="timer">
                <span data-bind="text: $root.minutes"></span>
                <span>:</span>
                <span data-bind="text: $root.seconds"></span>
              </div>

              <div class="w-100"></div>
              <div class="col-6 border border-ligh"> <strong>Puntuación</strong>
                total
                <br>
                <span class="txt-puntos">0</span>
              </div>
              <div class="col-6 border border-ligh"><strong>Fichas</strong> restantes
                <br>
                <span class="txt-puntos">0</span>
              </div>
            </div>
          </div>
          <!-- Player 2 Info-->
          <div class="col" data-bind="using: player2">
            <div class="row player2-info ml-1">
              <div class="col-5 border border-ligh">
                <img data-bind="attr: { src: letterImg, alt: letterTxt }" width="60" height="60"
                  class="d-inline-block align-center" alt="">
              </div>
              <div class="col-7 border border-ligh">
                <div class="row-sm-12" data-bind="text : name">
                </div>
                <div class="row-sm-12 player2-turn" data-bind="visible: turn">
                  <span>Tu turno</span>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col-12 border border-ligh"> <strong>Puntuación</strong>
                acumulada <br>
                <span class="txt-puntos">0</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Información las jugadas recientes-->
        <div class="row mx-0 log-panel">
          <div class="col border border-ligh">
            <strong>Últimas jugadas</strong>
          </div>
          <div class="w-100"></div>
          <div class="col border border-ligh pr-1">
            <ol class="log-list" data-bind="foreach: movementHistory">
              <li data-bind="text: $data"></li>
            </ol>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--<button type="button" class="close" data-dismiss="modal">&times;</button>-->

  <!-- Dialog: Loser -->
  <div class="modal fade " tabindex="-1" role="dialog" data-bind="modal:showDialogLoser">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content info-modal">
        <div class="modal-body ">
          <span class="title">Partida terminada</span><br>
          <img src="assets/images/icons/sad.png" alt="perdedor"><br>
          <span class="loser">¡Ooooooops!</span><br>
          <span>¡Has Perdido!</span><br>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btn-xs" data-bind="click : submitEnd">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Dialog: Winner -->
  <div class="modal fade " tabindex="-1" role="dialog" data-bind="modal:showDialogWinner">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content info-modal">
        <div class="modal-body ">
          <span class="title">Partida terminada</span><br>
          <img src="assets/images/icons/feliz.png" alt="perdedor"><br>
          <span class="winner">¡Felicidades!</span><br>
          <span>Has ganado la partida</span><br>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btn-xs" data-bind="click : submitEnd">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Dialog: Cambiar letras -->
  <div class="modal fade " tabindex="-1" role="dialog" data-bind="modal:showDialogCambioLetras">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content letras-modal">
        <div class="modal-body cambioLetras">
          <span class="title">Seleccione las letras que desea cambiar</span><br>
          <!-- ko using : tablero -->
          <ul>
            <!-- ko foreach : panel -->
            <li>
              <input type="checkbox" data-bind="attr: {id: 'myCheckbox' + $index()}" />
              <label data-bind="attr: {for: 'myCheckbox' + $index()}">
                <img data-bind="attr: { src: '/assets/images/' + $data + '.svg'}" alt="$data" />
              </label>
            </li>
            <!-- /ko -->
          </ul>
          <!-- /ko -->
        </div>
        <div class="modal-footer">
          <a class="circle-button confirm" data-bind="click: cambiarLetrasConfirm">
            <i class="material-icons">
              repeat
            </i>
          </a>
          <a class="circle-button cancel" data-bind="click: cambiarLetrasCancel">
            <i class="material-icons">
              close
            </i>
          </a>
        </div>
      </div>
    </div>
  </div>


  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  <!-- Popper -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
  </script>

  <!-- Shuffle   <script src="js/shuffler.js"></script>-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <!--Bootsrap-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
  </script>


  <!-- TouchPunch -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
  <!--<script src="./script.js"></script> -->
</body>

</html>